# FAQ: Установка и настройка Strapi

## Общие вопросы по установке

### Q: Какой способ установки Strapi самый простой?
**A**: Самый простой способ - использование команды `npx create-strapi-app@latest my-project --quickstart`. Это автоматически установит последнюю версию Strapi, настроит SQLite и запустит сервер.

### Q: Можно ли установить Strapi глобально?
**A**: Да, можно установить Strapi CLI глобально командой `npm install -g @strapi/cli`, но рекомендуется использовать npx для получения последней версии без глобальной установки.

### Q: Какая база данных используется по умолчанию?
**A**: По умолчанию Strapi использует SQLite, что идеально для разработки. Для продакшена рекомендуется PostgreSQL или MySQL.

### Q: Сколько времени занимает установка Strapi?
**A**: Установка занимает 5-10 минут в зависимости от скорости интернета и производительности компьютера. Большую часть времени занимает скачивание зависимостей.

---

## Проблемы с установкой

### Q: Ошибка "command not found: npx"
**A**: 
1. Убедитесь, что Node.js установлен (версия 18+)
2. Проверьте, что npm установлен вместе с Node.js
3. Перезапустите терминал
4. Попробуйте переустановить Node.js

### Q: Ошибка "port 1337 is already in use"
**A**: 
1. Остановите другие процессы на порту 1337
2. Или измените порт в файле `config/server.js`
3. Или используйте другой порт в .env файле

### Q: Медленная установка Strapi
**A**: 
1. Проверьте скорость интернета
2. Попробуйте использовать VPN
3. Очистите кэш npm: `npm cache clean --force`
4. Используйте yarn вместо npm

### Q: Ошибка "EACCES: permission denied"
**A**: 
1. **Windows**: Запустите терминал от имени администратора
2. **macOS/Linux**: Используйте sudo или настройте права доступа
3. **Альтернатива**: Используйте nvm для управления версиями Node.js

---

## Настройка базы данных

### Q: Как переключиться с SQLite на PostgreSQL?
**A**: 
1. Установите PostgreSQL
2. Создайте базу данных и пользователя
3. Установите драйвер: `npm install pg`
4. Обновите `config/database.js`
5. Добавьте настройки в .env файл

### Q: Какие базы данных поддерживает Strapi?
**A**: Strapi поддерживает:
- **SQLite** (по умолчанию)
- **PostgreSQL**
- **MySQL**
- **MongoDB**

### Q: Как настроить MySQL для Strapi?
**A**: 
1. Установите MySQL
2. Создайте базу данных
3. Установите драйвер: `npm install mysql2`
4. Обновите конфигурацию в `config/database.js`

### Q: Ошибка подключения к базе данных
**A**: 
1. Проверьте, что база данных запущена
2. Убедитесь, что настройки подключения правильные
3. Проверьте имя пользователя и пароль
4. Убедитесь, что база данных существует

---

## Конфигурация проекта

### Q: Как изменить порт сервера?
**A**: 
1. Откройте файл `config/server.js`
2. Измените значение порта: `port: env.int('PORT', 3000)`
3. Или добавьте в .env файл: `PORT=3000`
4. Перезапустите сервер

### Q: Как настроить CORS?
**A**: 
1. Откройте файл `config/middlewares.js`
2. Найдите настройки CORS
3. Добавьте разрешенные домены:
```javascript
cors: {
  enabled: true,
  origin: ['http://localhost:3000', 'https://yourdomain.com']
}
```

### Q: Как настроить переменные окружения?
**A**: 
1. Создайте файл `.env` в корне проекта
2. Добавьте переменные:
```env
HOST=0.0.0.0
PORT=1337
DATABASE_FILENAME=.tmp/data.db
APP_KEYS=your-app-keys
API_TOKEN_SALT=your-salt
ADMIN_JWT_SECRET=your-secret
```

### Q: Как настроить SSL/HTTPS?
**A**: 
1. Получите SSL сертификат
2. Добавьте настройки в `config/server.js`:
```javascript
https: {
  enabled: true,
  key: fs.readFileSync('path/to/key.pem'),
  cert: fs.readFileSync('path/to/cert.pem')
}
```

---

## Структура проекта

### Q: Что такое папка `config/`?
**A**: Папка `config/` содержит конфигурационные файлы:
- **admin.js** - настройки админ-панели
- **api.js** - настройки API
- **database.js** - настройки базы данных
- **middlewares.js** - настройки middleware
- **server.js** - настройки сервера

### Q: Что такое папка `src/`?
**A**: Папка `src/` содержит исходный код:
- **src/api/** - API и типы контента
- **src/admin/** - кастомизация админ-панели
- **src/extensions/** - расширения функциональности

### Q: Как добавить кастомные файлы?
**A**: 
1. Создайте папку `src/extensions/`
2. Добавьте кастомные контроллеры, сервисы, модели
3. Strapi автоматически обнаружит новые файлы

### Q: Что такое файл `.env`?
**A**: Файл `.env` содержит переменные окружения:
- Конфигурационные параметры
- Секретные ключи
- Настройки базы данных
- Параметры сервера

---

## Режимы работы

### Q: В чем разница между development и production режимами?
**A**: 
**Development:**
- Автоматическая перезагрузка
- Подробные ошибки
- Неоптимизированный код
- Отладочная информация

**Production:**
- Оптимизированный код
- Минимизированные ресурсы
- Отключенные инструменты разработки
- Высокая производительность

### Q: Как запустить Strapi в production режиме?
**A**: 
1. Соберите проект: `npm run build`
2. Запустите в production: `npm run start`
3. Или используйте переменную окружения: `NODE_ENV=production`

### Q: Как настроить автоматическую перезагрузку?
**A**: В development режиме Strapi автоматически перезагружается при изменении файлов. Для кастомной настройки используйте nodemon.

---

## Безопасность

### Q: Как сгенерировать безопасные ключи?
**A**: 
1. Используйте криптографически стойкие генераторы
2. Для APP_KEYS: `node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"`
3. Для JWT_SECRET: `node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"`

### Q: Как настроить аутентификацию?
**A**: 
1. Настройте JWT токены в `config/admin.js`
2. Настройте API токены в админ-панели
3. Настройте права доступа для ролей
4. Используйте HTTPS в продакшене

### Q: Как защитить API?
**A**: 
1. Настройте CORS в `config/middlewares.js`
2. Используйте rate limiting
3. Настройте права доступа для ролей
4. Валидируйте входные данные

---

## Производительность

### Q: Как оптимизировать производительность Strapi?
**A**: 
1. Используйте PostgreSQL или MySQL вместо SQLite
2. Настройте кэширование (Redis)
3. Оптимизируйте запросы к базе данных
4. Используйте CDN для статических файлов

### Q: Как настроить кэширование?
**A**: 
1. Установите Redis: `npm install redis`
2. Настройте кэширование в `config/database.js`
3. Используйте кэширование для часто запрашиваемых данных

### Q: Как мониторить производительность?
**A**: 
1. Используйте встроенные логи Strapi
2. Настройте внешний мониторинг (New Relic, DataDog)
3. Мониторьте метрики базы данных
4. Используйте профилирование Node.js

---

## Миграция и обновления

### Q: Как обновить Strapi?
**A**: 
1. Проверьте текущую версию: `npm run strapi version`
2. Обновите Strapi: `npm run strapi upgrade`
3. Следуйте инструкциям по миграции
4. Протестируйте приложение

### Q: Как сделать резервную копию?
**A**: 
1. Экспортируйте данные через админ-панель
2. Сделайте резервную копию базы данных
3. Сохраните конфигурационные файлы
4. Создайте архив проекта

### Q: Как перенести проект на другой сервер?
**A**: 
1. Скопируйте файлы проекта
2. Установите зависимости: `npm install`
3. Настройте базу данных
4. Обновите переменные окружения
5. Запустите сервер

---

## Проблемы и решения

### Q: Strapi не запускается
**A**: 
1. Проверьте логи ошибок
2. Убедитесь, что все зависимости установлены
3. Проверьте настройки базы данных
4. Убедитесь, что порт свободен

### Q: Ошибка "Database connection failed"
**A**: 
1. Проверьте, что база данных запущена
2. Убедитесь, что настройки подключения правильные
3. Проверьте права доступа пользователя
4. Проверьте, что база данных существует

### Q: Админ-панель не загружается
**A**: 
1. Проверьте, что сервер запущен
2. Очистите кэш браузера
3. Проверьте консоль браузера на ошибки
4. Убедитесь, что порт правильный

### Q: API не отвечает
**A**: 
1. Проверьте настройки CORS
2. Убедитесь, что права доступа настроены
3. Проверьте логи сервера
4. Протестируйте API через Postman

---

## Полезные ресурсы

### Официальная документация
- [Strapi Installation](https://docs.strapi.io/dev-docs/installation)
- [Configuration](https://docs.strapi.io/dev-docs/configuration)
- [Database Configuration](https://docs.strapi.io/dev-docs/database)
- [Deployment](https://docs.strapi.io/dev-docs/deployment)

### Сообщество
- [Strapi Forum](https://forum.strapi.io/)
- [Stack Overflow](https://stackoverflow.com/questions/tagged/strapi)
- [GitHub Issues](https://github.com/strapi/strapi/issues)

### Видео-уроки
- [Strapi YouTube Channel](https://www.youtube.com/c/Strapi)
- [Installation Tutorials](https://docs.strapi.io/dev-docs/installation)

---

## Контакты для поддержки

Если у вас остались вопросы, которые не покрыты в этом FAQ:

1. **Проверьте официальную документацию** Strapi
2. **Обратитесь к сообществу** на форуме Strapi
3. **Изучите GitHub Issues** для известных проблем
4. **Создайте новый вопрос** на Stack Overflow

**Удачи в изучении Strapi CMS!** 🚀 